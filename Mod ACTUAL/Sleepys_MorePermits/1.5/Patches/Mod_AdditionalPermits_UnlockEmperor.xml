<?xml version="1.0" encoding="UTF-8"?>
<Patch>
  <!-- This patch adds two new permits if the "Unlock Emperor (Continued)" mod is active. -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <!-- Ensure the mod’s name precisely matches the "name" defined in its About.xml. -->
      <li>Unlock Emperor (Continued)</li>
    </mods>

    <!-- If the mod is found, apply the following operations in sequence. -->
    <match Class="PatchOperationSequence">
      <operations>

        <!-- 1) Add a new permit to call 2 melee Stellic Guards, "CallMilitaryAidSLP_ADD_UE1a" -->
        <li Class="PatchOperationAdd">
          <!-- We insert our new Def inside the root <Defs> node. -->
          <xpath>/Defs</xpath>
          <value>
            <RoyalTitlePermitDef>
              <defName>CallMilitaryAidSLP_ADD_UE1a</defName>
              <label>call stellic melee team</label>
              <description>
                Call a group of 2 stellic guards specialized in melee to assist you for 4 days. 
                These soldiers can help fight for or defend your colony, but they won't do other tasks. 
                You’ll need to house and feed them. 
                Stellic guards are elite troopers with psycaster abilities; no penalty applies if they’re lost in battle.
              </description>
              <workerClass>RimworldSLP_MorePermits.RoyalTitlePermitWorker_SLP_CallStellicGuardMelee</workerClass>
              <minTitle>Stellarch</minTitle>
              <faction>Empire</faction>
              <!-- If you want to increase or decrease cost in synergy with other mods, adjust permitPointCost. -->
              <permitPointCost>1</permitPointCost>
              <!-- Adjust UI position if other permit mods also add permits. -->
              <uiPosition>(0,21)</uiPosition>
              <royalAid>
                <favorCost>10</favorCost>
                <pawnKindDef>Empire_Fighter_StellicGuardMelee</pawnKindDef>
                <pawnCount>2</pawnCount>
                <aidDurationDays>4</aidDurationDays>
              </royalAid>
              <!-- Possibly reduce or increase cooldownDays if you want faster or slower reuse. -->
              <cooldownDays>80</cooldownDays>
            </RoyalTitlePermitDef>
          </value>
        </li>

        <!-- 2) Add a new permit to call 2 ranged Stellic Guards, "CallMilitaryAidSLP_ADD_UE1b" -->
        <li Class="PatchOperationAdd">
          <xpath>/Defs</xpath>
          <value>
            <RoyalTitlePermitDef>
              <defName>CallMilitaryAidSLP_ADD_UE1b</defName>
              <label>call stellic ranged team</label>
              <description>
                Call a group of 2 stellic guards specialized in ranged combat to assist you for 4 days. 
                These soldiers can help fight for or defend your colony, but they won't do other tasks. 
                You’ll need to house and feed them.
                Stellic guards are elite troopers with psycaster abilities; no penalty applies if they’re lost in battle.
              </description>
              <workerClass>RimworldSLP_MorePermits.RoyalTitlePermitWorker_SLP_CallStellicGuardRanged</workerClass>
              <minTitle>Stellarch</minTitle>
              <faction>Empire</faction>
              <permitPointCost>1</permitPointCost>
              <uiPosition>(1,21)</uiPosition>
              <royalAid>
                <favorCost>10</favorCost>
                <pawnKindDef>Empire_Fighter_StellicGuardRanged</pawnKindDef>
                <pawnCount>2</pawnCount>
                <aidDurationDays>4</aidDurationDays>
              </royalAid>
              <cooldownDays>80</cooldownDays>
            </RoyalTitlePermitDef>
          </value>
        </li>

      </operations>
    </match>
  </Operation>
</Patch>
